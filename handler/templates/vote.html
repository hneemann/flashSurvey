<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <link rel="icon" type="image/svg" href="/static/icon.svg">
  <title>Umfrage</title>
    <style>
        @media (pointer: coarse) {
           body {
               padding: 0;
               border: 0;
               margin: 0;
               font-family: Arial, sans-serif;
               font-size: 2.5vh;
           }
           html {
               padding: 0;
               border: 0;
               margin: 0;
               -moz-text-size-adjust: none;
               -webkit-text-size-adjust: none;
           }
        }
        @media (pointer: fine) {
           body {
               padding: 0;
               border: 0;
               margin: 0;
               font-family: Arial, sans-serif;
               font-size: 150%;
           }
           html {
               padding: 0;
               border: 0;
               margin: 0;
           }
        }
        button {
          width: 90%;
          padding: 0.5em;
          font-size: inherit;
          font-family: inherit;
        }
        label.check {
          width: 90%;
          line-height: 1.1;
          text-align: left;
          display: grid;
          grid-template-columns: 1em auto;
          gap: 0.5em;
          padding-left: 1em;
        }
        div.main {
            display: grid;
            grid-template-columns: 1fr;
            grid-template-rows: repeat(auto-fit, 1fr);
            height: 100vh;
            width: 100%;
        }
        div.text {
            font-weight: bold;
            padding: 0.5em;
        }
        div.head {
            width: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        div.item {
            width: calc( 100% - 1em );
            padding: 0.5em;
            text-align: center;
        }
        div.notify {
            width: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            padding-top: 2em;
       }
  </style>
  <script>
    function vote(option,number) {
      updateTable("/voteRest/?id={{.SurveyID}}&o=" + option+"&n=" + number);
    }
    function reload() {
      updateTable("/voteRest/?id={{.SurveyID}}");
    }
    function multipleVote(number) {
      let option = "";
      let i = 0;
      while (true) {
        let o = document.getElementById("option" + i);
        if (!o) {
          break;
        }
        if (o.checked) {
          if (option.length > 0) {
            option = option+",";
          }
          option += i;
        }
        i++;
      }
      console.log("multipleVote: " + option);
      updateTable("/voteRest/?id={{.SurveyID}}&o=" + option+"&n=" + number);
    }
    function updateTable(url) {
      fetch(url)
          .then(function (response) {
             if (response.status !== 200) {
                 window.location.reload();
                 return;
             }
             return response.text();
          })
          .catch(function (error) {
             alert("networkError");
          })
          .then(function(html) {
             document.getElementById("main").innerHTML = html;
          })
    }
  </script>
</head>
<body>
  <div id="main" class="main">
      {{template "voteQuestion.html" .}}
  </div>
</body>
</html>